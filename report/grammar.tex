\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{grammar}\PY{+w}{ }\PY{n+nc}{Babble}\PY{p}{;}

\PY{c}{// Top most rule of a Babble program.}
\PY{n+nl}{program}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{n+nv}{clazz}\PY{o}{*}\PY{+w}{ }\PY{p}{;}

\PY{c}{// Rule for class definitions inside a Babble program.}
\PY{n+nl}{clazz}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{n+nv}{classname}\PY{o}{=}\PY{n+no}{ID}\PY{+w}{ }\PY{o}{(}\PY{n+no}{EXTENDS}\PY{+w}{ }\PY{l+s}{\PYZsq{}:\PYZsq{}}\PY{+w}{ }\PY{n+nv}{superclass}\PY{o}{=}\PY{n+no}{ID}\PY{o}{)}\PY{o}{?}\PY{+w}{ }\PY{l+s}{\PYZsq{}[\PYZsq{}}\PY{+w}{ }\PY{o}{(}\PY{n+nv}{decls}\PY{+w}{ }\PY{l+s}{\PYZsq{}.\PYZsq{}}\PY{o}{)}\PY{o}{?}\PY{+w}{ }\PY{n+nv}{mthd}\PY{o}{*}\PY{+w}{ }\PY{l+s}{\PYZsq{}]\PYZsq{}}\PY{+w}{ }\PY{l+s}{\PYZsq{}.\PYZsq{}}\PY{+w}{ }\PY{p}{;}

\PY{c}{// Several types of method definition inside a Babble class.}
\PY{n+nl}{mthd}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{n+nv}{method}\PY{o}{=}\PY{n+no}{ID}\PY{+w}{ }\PY{l+s}{\PYZsq{}[\PYZsq{}}\PY{+w}{ }\PY{n+nv}{sequence}\PY{+w}{ }\PY{l+s}{\PYZsq{}]\PYZsq{}}\PY{+w}{ }\PY{l+s}{\PYZsq{}.\PYZsq{}}\PY{+w}{                    }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{UnaryMethod}
\PY{+w}{     }\PY{o}{|}\PY{+w}{ }\PY{n+nv}{method}\PY{o}{=}\PY{n+no}{OPERATOR}\PY{+w}{ }\PY{l+s}{\PYZsq{}:\PYZsq{}}\PY{+w}{ }\PY{n+nv}{arg}\PY{o}{=}\PY{n+nv}{decl}\PY{+w}{ }\PY{l+s}{\PYZsq{}[\PYZsq{}}\PY{+w}{ }\PY{n+nv}{sequence}\PY{+w}{ }\PY{l+s}{\PYZsq{}]\PYZsq{}}\PY{+w}{ }\PY{l+s}{\PYZsq{}.\PYZsq{}}\PY{+w}{ }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{InfixMethod}
\PY{+w}{     }\PY{o}{|}\PY{+w}{ }\PY{o}{(}\PY{n+no}{ID}\PY{+w}{ }\PY{l+s}{\PYZsq{}:\PYZsq{}}\PY{+w}{ }\PY{n+nv}{decl}\PY{o}{)}\PY{o}{+}\PY{+w}{ }\PY{l+s}{\PYZsq{}[\PYZsq{}}\PY{+w}{ }\PY{n+nv}{sequence}\PY{+w}{ }\PY{l+s}{\PYZsq{}]\PYZsq{}}\PY{+w}{ }\PY{l+s}{\PYZsq{}.\PYZsq{}}\PY{+w}{               }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{KeywordMethod}
\PY{+w}{     }\PY{p}{;}

\PY{c}{// A sequence of expressions.}
\PY{n+nl}{sequence}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{o}{(}\PY{n+nv}{expr}\PY{+w}{ }\PY{o}{(}\PY{l+s}{\PYZsq{}.\PYZsq{}}\PY{o}{+}\PY{+w}{ }\PY{n+nv}{expr}\PY{o}{)}\PY{o}{*}\PY{o}{)}\PY{o}{?}\PY{+w}{ }\PY{l+s}{\PYZsq{}.\PYZsq{}}\PY{o}{?}\PY{+w}{ }\PY{p}{;}

\PY{c}{// Several rules for expressions.}
\PY{c}{// Where non\PYZhy{}(sub)expressions offer functionality, }
\PY{c}{// expressions access and combine these functionalities into a working program.}
\PY{n+nl}{expr}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{n+nv}{rcv}\PY{o}{=}\PY{n+nv}{expr}\PY{+w}{ }\PY{n+nv}{method}\PY{o}{=}\PY{n+no}{ID}\PY{+w}{                  }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{UnarySend}
\PY{+w}{     }\PY{o}{|}\PY{+w}{ }\PY{n+nv}{rcv}\PY{o}{=}\PY{n+nv}{expr}\PY{+w}{ }\PY{n+nv}{method}\PY{o}{=}\PY{n+no}{OPERATOR}\PY{+w}{ }\PY{n+nv}{arg}\PY{o}{=}\PY{n+nv}{expr}\PY{+w}{   }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{InfixSend}
\PY{+w}{     }\PY{o}{|}\PY{+w}{ }\PY{n+nv}{rcv}\PY{o}{=}\PY{n+nv}{expr}\PY{+w}{ }\PY{o}{(}\PY{n+no}{ID}\PY{+w}{ }\PY{l+s}{\PYZsq{}:\PYZsq{}}\PY{+w}{ }\PY{n+nv}{subexpr}\PY{o}{)}\PY{o}{+}\PY{+w}{          }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{KeywordSend}
\PY{+w}{     }\PY{o}{|}\PY{+w}{ }\PY{n+no}{ID}\PY{+w}{ }\PY{l+s}{\PYZsq{}:=\PYZsq{}}\PY{+w}{ }\PY{n+nv}{expr}\PY{+w}{                        }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{Assignment}
\PY{+w}{     }\PY{o}{|}\PY{+w}{ }\PY{n+nv}{subexpr}\PY{+w}{                             }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{LoneExpr}
\PY{+w}{     }\PY{p}{;}

\PY{c}{// Sub expressions, in the AST these are treated like normal expressions.}
\PY{c}{// These differ from the expr rule to disallow sending messages as arguments.}
\PY{n+nl}{subexpr}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{n+nv}{value}\PY{o}{=}\PY{n+no}{INTEGER}\PY{+w}{                 }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{IntLit}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{n+nv}{string}\PY{o}{=}\PY{n+no}{STRING}\PY{+w}{                 }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{StrLit}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{n+no}{TRUE}\PY{+w}{                          }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{TrueLit}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{n+no}{FALSE}\PY{+w}{                         }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{FalseLit}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{n+no}{NIL}\PY{+w}{                           }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{NilLit}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{n+no}{ID}\PY{+w}{                            }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{VarRef}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}\PYZsh{}\PYZsq{}}\PY{+w}{ }\PY{n+no}{ID}\PY{+w}{                        }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{SymbolLit}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}[\PYZsq{}}\PY{+w}{ }\PY{n+nv}{sequence}\PY{+w}{ }\PY{l+s}{\PYZsq{}]\PYZsq{}}\PY{+w}{              }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{Block}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}\PYZob{}\PYZsq{}}\PY{+w}{ }\PY{o}{(}\PY{n+nv}{expr}\PY{+w}{ }\PY{l+s}{\PYZsq{},\PYZsq{}}\PY{o}{)}\PY{o}{*}\PY{+w}{ }\PY{n+nv}{expr}\PY{o}{?}\PY{+w}{ }\PY{l+s}{\PYZsq{}\PYZcb{}\PYZsq{}}\PY{+w}{     }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{ArrayLit}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}(\PYZsq{}}\PY{+w}{ }\PY{n+nv}{expr}\PY{+w}{ }\PY{l+s}{\PYZsq{})\PYZsq{}}\PY{+w}{                  }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{ParenExpr}
\PY{+w}{        }\PY{o}{|}\PY{+w}{ }\PY{n+nv}{decls}\PY{+w}{                         }\PY{o}{\PYZsh{}}\PY{+w}{ }\PY{n+no}{DeclExpr}
\PY{+w}{        }\PY{p}{;}

\PY{c}{// Rules for variable declaration.}
\PY{n+nl}{decls}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{l+s}{\PYZsq{}|\PYZsq{}}\PY{+w}{ }\PY{n+nv}{decl}\PY{o}{+}\PY{+w}{ }\PY{l+s}{\PYZsq{}|\PYZsq{}}\PY{p}{;}
\PY{n+nl}{decl}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{n+no}{ID}\PY{p}{;}

\PY{c}{// Rules for literals.}
\PY{n+nl}{TRUE}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{l+s}{\PYZsq{}true\PYZsq{}}\PY{p}{;}
\PY{n+nl}{FALSE}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{l+s}{\PYZsq{}false\PYZsq{}}\PY{p}{;}
\PY{n+nl}{NIL}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{l+s}{\PYZsq{}nil\PYZsq{}}\PY{p}{;}

\PY{n+nl}{EXTENDS}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{l+s}{\PYZsq{}extends\PYZsq{}}\PY{p}{;}

\PY{n+nl}{ID}\PY{p}{:}\PY{+w}{ }\PY{p}{[}\PY{x}{A\PYZhy{}Za\PYZhy{}z}\PY{p}{]}\PY{p}{[}\PY{x}{a\PYZhy{}zA\PYZhy{}Z0\PYZhy{}9\PYZus{}\PYZbs{}\PYZbs{}}\PY{p}{]}\PY{o}{*}\PY{p}{;}
\PY{n+nl}{INTEGER}\PY{+w}{   }\PY{p}{:}\PY{+w}{ }\PY{l+s}{\PYZsq{}\PYZhy{}\PYZsq{}}\PY{o}{?}\PY{+w}{ }\PY{p}{[}\PY{x}{0\PYZhy{}9}\PY{p}{]}\PY{o}{+}\PY{p}{;}
\PY{n+nl}{STRING}\PY{+w}{    }\PY{p}{:}\PY{+w}{ }\PY{l+s}{\PYZsq{}\PYZdq{}\PYZsq{}}\PY{+w}{ }\PY{o}{(}\PY{o}{.}\PY{o}{*}\PY{o}{?}\PY{o}{)}\PY{+w}{ }\PY{l+s}{\PYZsq{}\PYZdq{}\PYZsq{}}\PY{p}{;}

\PY{n+nl}{OPERATOR}\PY{+w}{  }\PY{p}{:}\PY{+w}{ }\PY{o}{(}\PY{l+s}{\PYZsq{}+\PYZsq{}}\PY{+w}{ }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}\PYZhy{}\PYZsq{}}\PY{+w}{ }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}*\PYZsq{}}\PY{+w}{ }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}/\PYZsq{}}\PY{+w}{ }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}=\PYZsq{}}\PY{+w}{ }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}!\PYZsq{}}\PY{+w}{ }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}\PYZlt{}\PYZsq{}}\PY{+w}{ }\PY{o}{|}\PY{+w}{ }\PY{l+s}{\PYZsq{}\PYZgt{}\PYZsq{}}\PY{+w}{ }\PY{o}{)}\PY{o}{+}\PY{p}{;}

\PY{c}{// Ignore comments and whitespace.}
\PY{n+nl}{COMMENT}\PY{+w}{   }\PY{p}{:}\PY{+w}{ }\PY{l+s}{\PYZsq{}/*\PYZsq{}}\PY{+w}{ }\PY{o}{(}\PY{o}{.}\PY{o}{)}\PY{o}{*}\PY{o}{?}\PY{+w}{ }\PY{l+s}{\PYZsq{}*/\PYZsq{}}\PY{+w}{ }\PY{o}{\PYZhy{}\PYZgt{}}\PY{+w}{ }\PY{n+nv}{skip}\PY{p}{;}
\PY{n+nl}{SEPARATOR}\PY{+w}{ }\PY{p}{:}\PY{+w}{ }\PY{p}{[}\PY{x}{ \PYZbs{}t\PYZbs{}r\PYZbs{}n}\PY{p}{]}\PY{+w}{ }\PY{o}{\PYZhy{}\PYZgt{}}\PY{+w}{ }\PY{n+nv}{skip}\PY{p}{;}
\end{Verbatim}
